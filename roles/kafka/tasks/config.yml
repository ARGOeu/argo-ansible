---
# tasks file for Apache Kafka system configurations


# System groups & users.

- name: "Ensure group '{{ kafka_group }}' exists"
  group:
    name: "{{ kafka_group }}"
    system: yes
  tags:
    - kafka
    - kafka:config
    - kafka:install
    - kafka:system
    - kafka:group

- name: "Ensure user '{{ kafka_user }}' exists"
  user:
    name: "{{ kafka_user }}"
    group: "{{ kafka_group }}"
    create_home: no
    system: yes
    comment: Apache Kafka user
  tags:
    - kafka
    - kafka:config
    - kafka:install
    - kafka:system
    - kafka:user


# Directories

- name: "Create {{ kafka_log_dirs }} directory for Apache Kafka DATA if it does not exist"
  file:
    path: "{{ kafka_log_dirs }}"
    state: directory
    owner: "{{ kafka_user }}"
    group: "{{ kafka_group }}"
    mode: '0755'
    recurse: yes
  tags:
    - kafka
    - kafka:config
    - kafka:install
    - kafka:system
    - kafka:disk
    - kafka:data_directory
    - kafka:create_data_directory


- name: "Create  /etc/kafka/   directory for Apache config files if it does not exist"
  file:
    path: "/etc/kafka/conf"
    state: directory
    owner: "{{ kafka_user }}"
    group: "{{ kafka_group }}"
    mode: '0755'
    recurse: yes
  tags:
    - kafka
    - kafka:config
    - kafka:install
    - kafka:system
    - kafka:config_directory


- name: "Set appropriate ownership, group and permissions in {{ kafka_root }}"
  file:
    path: "{{ kafka_root }}"
    state: directory
    owner: "{{ kafka_user }}"
    group: "{{ kafka_group }}"
    mode: '0755'
    recurse: yes
  tags:
    - kafka
    - kafka:config
    - kafka:install
    - kafka:system
    - kafka:disk


- name: "Create {{ kafka_logs }} directory for Apache Kafka LOGs if it does not exist"
  file:
    path: "{{ kafka_logs }}"
    state: directory
    owner: "{{ kafka_user }}"
    group: "{{ kafka_group }}"
    mode: '0755'
  tags:
    - kafka
    - kafka:config
    - kafka:install
    - kafka:logs




# System heap


# System SWAP

